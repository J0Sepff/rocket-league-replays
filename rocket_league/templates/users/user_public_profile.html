{% extends "base.html" %}
{% load cache pagination %}

{% block content_primary %}
<div class="row">
    <div class="small-12 columns">
        <h3>Profile: {{ object }}</h3>
        <hr>
    </div>
</div>

<div class="row">
    <div class="medium-12 columns">
        <h4>Replay packs</h4>

        <table width="100%" class="expand">
            <thead>
                <tr>
                    <th>Title</th>
                    <th width="350">Maps</th>
                    <th>Goals</th>
                    <th>Players</th>
                    <th>Total duration</th>
                    <th>Last updated</th>
                </tr>
            </thead>
            <tbody>
                {% for replaypack in object.replaypack_set.all %}
                    {% cache 3600 'replaypack_profile_list_item' replaypack.pk %}
                        <tr data-href="{{ replaypack.get_absolute_url }}">
                            <td><a href="{{ replaypack.get_absolute_url }}">{{ replaypack }}</a></td>
                            <td>{{ replaypack.maps }}</td>
                            <td>{{ replaypack.goals }}</td>
                            <td>{{ replaypack.players|length }}</td>
                            <td>{{ replaypack.total_duration }}</td>
                            <td>{{ replaypack.last_updated|date:"jS F, h:iA" }}</td>
                        </tr>
                    {% endcache %}
                {% empty %}
                <tr>
                    <td colspan="7">{{ object }} does not currently have any replay packs.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<div class="row">
    <div class="medium-12 columns">
        <h4>Replays</h4>

        <table width="100%" class="expand">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Map</th>
                    <th>Type</th>
                    <th>Score</th>
                    <th>Length</th>
                    <th>Region</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                {% for replay in object.replay_set.all %}
                    {% cache 3600 'replay_list_item' replay.pk %}
                        <tr data-href="{{ replay.get_absolute_url }}">
                            <td><a href="{{ replay.get_absolute_url }}">{{ replay }}</a></td>
                            <td>{{ replay.map }}</td>
                            <td>{{ replay.team_sizes }}v{{ replay.team_sizes }}</td>
                            <td><span class="primary">{{ replay.team_0_score }}</span> - <span class="secondary">{{ replay.team_1_score }}</span></td>
                            <td>{{ replay.match_length }}</td>
                            <td>{{ replay.region }}</td>
                            <td>{{ replay.timestamp|date:"jS F, h:iA" }}</td>
                        </tr>
                    {% endcache %}
                {% empty %}
                <tr>
                    <td colspan="7">{{ object }} does not currently have any replays.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


{% endblock %}
